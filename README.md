# Genetic Algorithm for alpha mining(multi cryptocurrency)

## Project Overview
### Introduction
- **Background**：This project is based on genetic algorithm, mining token selecting alpha factors for multiple cryptocurrencies. The genetic process is all writen in pytorch, so it can be accelerated on GPU.
- **Input and Output**： 
- 1. ***Input***: a dataframe of features, three of its columns must be "date", "token", "returns". 
  Column "date" is the trading date, column "token" is the trading tokens, the third column "returns" is the future returns for every tokens.
  Other column's names can be customized(pay attention to not containing abnormal symbols like "+"、"%"、"@"...)
- 2. ***Output***: dataframes of alpha factors in /config/factor; formulas which generate these factors in /config/model

### operators 
- **operators**：operators py files are all stored in /cals. There are three kinds of operators in this project:
- 1. ***Elementary operators***: simple calculations such as "+", "-", "*", "/", "sigmoid"
- 2. ***Cross sectional operators***:  calculations based on all the tokens in a date
- 3. ***Time series operators***: calculations based on time series of rolling windows
    
### evaluate functions
- **evaluate functions**：There are five kinds of evaluate functions in this project, it is used to evaluate the fitness of the factors generated by the genetic algorithm:
- 1. ***RANKIC, RANKICIR***: the spearman correlation and factors and returns, and rankicir of the factors
- 2. ***Mean of Hedge Returns, Mean/std of Hedge Returns***:  according to factor ranking, hedge the top 20% of tokens against the bottom 20% of tokens, calculate the return series mean and std. 
- 3. ***NDCG***: describe the effect of the factor's alpha ability on long list
    
## How to run the project
### Installation
- **Critical packages**：pandas, pytorch, deap

### Usage
- **main.py**：the main function of the project
- 1. train set, validation set, test set is splited based on train_start, train_end, valid_start, valid_end, test_start, test_end.
     Please specify the exact time in minutes and seconds for these time (if available, or can be directly 00.00.00). 
     If there is no validation set, the valid_start and valid_end can be set to be the same as the train_start and train_end. 
- 2. data_name is the file name for genetic data
- 3. In the "train" mode, the formula is trained through the genetic process and saved to /config/model. 
     At the same time, the factors in the date range from test_start to test_end are predicted and saved to config/factor; 
     In "predict" mode, the program calls the formula file under /config/actor to generate predicted values within the range of test_start to test_end.
- 4. Cal represents the meaning of operators in the program, and cals is a list of operators. 
     If you want to use specific operators, generate a list of names of these operators, where the names are strings of operator function names. 
     If you want to use all the functions, you can directly instantiated the class GPProcess with parameter cals='all'
- 5. train_evaluations is an evaluation function for the training process, and currently five have been implemented. 
     If both functions of the list are the same, single objective optimization can be achieved. 
     If both functions of the list are not the same, double objective optimization can be achieved by simultaneously considering two evaluate functions.
     valid_evaluations is the list contains evaluation function of the validation set. 
     